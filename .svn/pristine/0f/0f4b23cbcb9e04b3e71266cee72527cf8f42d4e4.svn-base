using System;
using System.Windows.Forms;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using TypApplication.Controller;
using TypApplication.Model;
using TypApplication.View;

namespace TypingApplicationTestEnvoirement.Controller
{
    [TestClass]
    public class KeyPerMinuteTest
    {
        [TestMethod]
        public void ShouldChangeKeysPerMinute_WhenKeyPress()
        {
            TextInput input = new TextInput();

            RichTextBox testText = new RichTextBox();
            KeyData testData = new KeyData();
            ExerciseController exerciseController = new ExerciseController(testData);

            testText.Text = "A";
            testData.Delay = 1;

            //Old keystroke value
            int oldValue = KeyData.KeystrokeCounter;
            
            //Input key
            input.Log(testData, new KeyEventArgs(Keys.A));
            //Calculate keystroke
            exerciseController.CalculateKeystrokesPerMinute();

            Assert.AreNotEqual(oldValue, KeyData.KeystrokesPerMinute);
        }
    }
}
